<nav
  class="navbar navbar-dark navbar-expand-lg bg-dark sticky-top"
  *ngIf="navbar; else navbarUnavailable"
>
  <div class="container-fluid">
    <a *ngIf="navbar?.url" routerLink="/" class="navbar-brand">
      <img
        alt="Streamer Station"
        [src]="navbar.url"
        class="img-fluid"
        width="70"
        height="50"
      />
    </a>
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <div class="container text-center">
        <div class="row text-start">
          <!-- Full menu for large screens -->
          <div class="col-12 d-none d-lg-block">
            <!-- Move the menu to the right side -->
            <ul class="navbar-nav mb-2 mb-lg-0 ms-auto">
              <li
                class="nav-item pe-3"
                *ngFor="let item of navbar?.navbarMenus"
                [ngSwitch]="
                  item.link.includes('/cart') ||
                  item.name.includes('bi bi-') ||
                  item.name === 'Verify Designers'
                "
                [class.dropdown]="item.nestedMenus?.length"
              >
                <!-- For regular menu items -->
                <ng-container *ngSwitchCase="false">
                  <a
                    class="nav-link text-white"
                    [routerLink]="item.link"
                    routerLinkActive="active"
                  >
                    {{ item.name }}
                  </a>
                  <ul
                    *ngIf="item.nestedMenus?.length"
                    class="dropdown-menu bg-dark p-2"
                  >
                    <li *ngFor="let nested of item.nestedMenus">
                      <a
                        class="dropdown-item px-3 py-2 rounded text-secondary"
                        [routerLink]="nested.link"
                      >
                        {{ nested.name }}
                      </a>
                    </li>
                  </ul>
                </ng-container>

                <!-- For cart icon item -->
                <ng-container *ngSwitchCase="true">
                  <div
                    *ngIf="
                      item.link.includes('/cart') &&
                      item.name.includes('bi bi-')
                    "
                  >
                    <a class="position-relative" [routerLink]="item.link">
                      <i
                        [class]="item.name"
                        style="font-size: 1.5rem; color: white"
                      ></i>
                      <span
                        class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-success"
                        >0</span
                      >
                    </a>
                  </div>
                </ng-container>
                <!-- For buttom item -->
                <ng-container *ngSwitchCase="true">
                  <div *ngIf="item.name === 'Verify Designers'">
                    <button
                      class="btn btn-opposite rounded-pill btn-dark text-white fw-bolder border ms-lg-2 px-lg-5 py-lg-2 text-uppercase col-8 col-lg-12"
                      [routerLink]="item.link"
                    >
                      {{ item.name }}
                    </button>
                  </div>
                </ng-container>
              </li>
            </ul>
          </div>
        </div>
        <!-- Menu split for medium and smaller screens -->
        <div class="row justify-content-center">
          <!-- Left column -->
          <div class="col-6 d-lg-none text-start">
            <ul class="navbar-nav mb-2 mb-lg-0">
              <li
                class="nav-item pe-3"
                *ngFor="let item of getMenuColumns().left"
                [ngSwitch]="
                  item.link.includes('/cart') ||
                  item.name.includes('bi bi-') ||
                  item.name === 'Verify Designers'
                "
                [class.dropdown]="item.nestedMenus?.length"
              >
                <!-- For regular menu items -->
                <ng-container *ngSwitchCase="false">
                  <a
                    class="nav-link text-white"
                    [routerLink]="item.link"
                    routerLinkActive="active"
                  >
                    {{ item.name }}
                  </a>
                  <ul
                    *ngIf="item.nestedMenus?.length"
                    class="dropdown-menu bg-dark p-2"
                  >
                    <li *ngFor="let nested of item.nestedMenus">
                      <a
                        class="dropdown-item px-3 py-2 rounded text-secondary text-wrap"
                        [routerLink]="nested.link"
                      >
                        {{ nested.name }}
                      </a>
                    </li>
                  </ul>
                </ng-container>

                <!-- For cart icon item -->
                <ng-container *ngSwitchCase="true">
                  <div
                    *ngIf="
                      item.link.includes('/cart') &&
                      item.name.includes('bi bi-')
                    "
                  >
                    <a class="position-relative" [routerLink]="item.link">
                      <i
                        [class]="item.name"
                        style="font-size: 1.5rem; color: white"
                      ></i>
                      <span
                        class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-success"
                        >0</span
                      >
                    </a>
                  </div>
                </ng-container>
              </li>
            </ul>
          </div>

          <!-- Right column -->
          <div class="col-6 d-lg-none text-start">
            <ul class="navbar-nav mb-2 mb-lg-0">
              <li
                class="nav-item pe-3"
                *ngFor="let item of getMenuColumns().right"
                [ngSwitch]="
                  item.link.includes('/cart') ||
                  item.name.includes('bi bi-') ||
                  item.name === 'Verify Designers'
                "
                [class.dropdown]="item.nestedMenus?.length"
              >
                <!-- For regular menu items -->
                <ng-container *ngSwitchCase="false">
                  <a
                    class="nav-link text-white"
                    [routerLink]="item.link"
                    routerLinkActive="active"
                  >
                    {{ item.name }}
                  </a>
                  <ul
                    *ngIf="item.nestedMenus?.length"
                    class="dropdown-menu bg-dark p-2"
                  >
                    <li *ngFor="let nested of item.nestedMenus">
                      <a
                        class="dropdown-item px-3 py-2 rounded text-secondary"
                        [routerLink]="nested.link"
                      >
                        {{ nested.name }}
                      </a>
                    </li>
                  </ul>
                </ng-container>

                <!-- For cart icon item -->
                <ng-container *ngSwitchCase="true">
                  <div
                    *ngIf="
                      item.link.includes('/cart') &&
                      item.name.includes('bi bi-')
                    "
                  >
                    <a class="position-relative" [routerLink]="item.link">
                      <i
                        [class]="item.name"
                        style="font-size: 1.5rem; color: white"
                      ></i>
                      <span
                        class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-success"
                        >0</span
                      >
                    </a>
                  </div>
                </ng-container>
              </li>
            </ul>
          </div>

          <!-- Centered button for small/medium screens -->
          <div class="row mt-3 d-lg-none">
            <!-- Hidden on large screens (d-md-none) -->
            <div class="col-12">
              <button
                *ngIf="buttonItem"
                class="btn btn-opposite rounded-pill btn-dark text-white fw-bolder border ms-lg-2 px-lg-5 py-lg-2 text-uppercase col-12"
                [routerLink]="buttonItem.link"
              >
                {{ buttonItem.name }}
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</nav>

<!-- Default message when navbar is not available -->
<ng-template #navbarUnavailable>
  <div class="container-fluid bg-black">
    <div class="alert alert-black text-center m-0 text-danger" role="alert">
      The navigation bar is currently unavailable. Please try again later or
      check Backend.
    </div>
  </div>
</ng-template>
